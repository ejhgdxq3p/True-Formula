# 🧪 真正的设计 - 药理学实验室风格

> **设计理念：Interactive Laboratory（交互式实验室）**
>
> 用户不是在"填表单"，而是在"做实验"！

---

## 🎨 设计语言：Scientific Playground

### 核心概念
1. **日晷是主角** - 占据页面中心，24小时圆环始终可见
2. **补剂是粒子** - 可拖拽的pill元素，用户直接操作
3. **互斥是化学键** - 冲突用红色"断裂键"表示，协同用绿色"共价键"
4. **社区是培养皿** - 其他用户的stack像细菌菌落一样展示

### 配色系统（NO 渐变！）

```css
/* 实验室纯色调色板 */
--lab-white: #FAFAFA;        /* 实验室墙壁 */
--lab-black: #1A1A1A;        /* 数据标注 */
--chemical-blue: #0066FF;    /* 化学反应蓝 */
--warning-yellow: #FFD700;   /* 警告标签 */
--danger-red: #FF3B30;       /* 危险品红 */
--safe-green: #34C759;       /* 安全绿 */
--neutral-gray: #8E8E93;     /* 中性灰 */

/* 补剂类型纯色 */
--vitamin: #0066FF;
--mineral: #FF3B30;
--amino: #AF52DE;
--herbal: #34C759;
```

### 字体系统

```css
--font-data: 'JetBrains Mono', 'Courier New', monospace;  /* 数据/代码 */
--font-label: 'Inter', -apple-system, sans-serif;         /* 标签 */
--font-display: 'Space Grotesk', sans-serif;              /* 标题 */
```

---

## 📐 布局架构：3栏实验台

```
┌─────────────────────────────────────────────────────┐
│  Header: SUPPLEMENT LAB - [搜索] [社区] [我的实验]   │
├──────────┬──────────────────────────┬────────────────┤
│          │                          │                │
│  左栏：   │      中央：日晷           │   右栏：        │
│  补剂库   │    (24h Timeline)        │   冲突面板     │
│  (Pills)  │                          │   (Conflicts)  │
│          │   [可拖拽pill到时间点]    │                │
│  可搜索   │                          │   实时显示     │
│  可筛选   │   Hover显示详情          │   互斥关系     │
│  可拖拽   │                          │                │
│          │                          │   [化学键图]   │
│  [分类]   │   底部：时间线列表        │                │
│  □ 维生素 │                          │   [建议]       │
│  □ 矿物质 │                          │                │
│  □ 氨基酸 │                          │                │
│          │                          │                │
├──────────┴──────────────────────────┴────────────────┤
│  底部：社区墙 - 滚动展示其他用户的Stack               │
└─────────────────────────────────────────────────────┘
```

---

## 🔬 核心组件设计

### 1. 日晷时间轮（中央主角）

**设计要求：**

```tsx
// 样式：科学仪表盘风格
- 24小时外圈：白色底 + 黑色刻度线（精确到30分钟）
- 时间标记：等宽字体数字 (00, 06, 12, 18)
- 背景：网格纸效果（类似实验室记录纸）
- 中心：Logo或当前时间

// 交互：
1. 从左栏拖拽pill到圆环上
2. pill会自动吸附到最近的30分钟刻度
3. 同一时间点的pills会堆叠显示（卡片叠加效果）
4. Hover pill → 显示详情卡片（浮出效果）
5. 右键pill → 删除 / 移动到其他时间

// 视觉反馈：
- 拖拽时：pill半透明 + 目标时间点高亮
- 放置后：pill弹跳动画落入位置
- 冲突时：pill周围红色脉冲警告
- 协同时：pill周围绿色光环
```

**参考设计：**
```
        00:00
         ║
    18 ══╬══ 06
         ║
        12:00

- 圆环上的pill: [💊 Vit D] [💊 Ca] [💊 Mg]
- 连线显示互斥关系（红色虚线）
```

---

### 2. 左栏：补剂库（Pill Drawer）

**设计要求：**

```tsx
// 布局：
┌─────────────────┐
│ 🔍 搜索补剂      │
├─────────────────┤
│ 筛选：           │
│ ☑ Vitamin       │
│ ☐ Mineral       │
│ ☐ Amino Acid    │
├─────────────────┤
│ 💊 Vitamin D3   │ ← 可拖拽
│    2000-5000 IU │
│    [+]          │ ← 点击添加到日晷
├─────────────────┤
│ 💊 Magnesium    │
│    200-400 mg   │
│    [+]          │
├─────────────────┤
│ 💊 Calcium      │
│    500-1000 mg  │
│    [+]          │
└─────────────────┘

// 样式：
- 每个pill卡片：白色底 + 左侧彩色边框（类型色）
- Hover: 轻微上浮 + 阴影加深
- 拖拽时：卡片跟随鼠标，半透明
- 已添加：置灰 + 打勾 ✓

// 交互：
1. 拖拽pill到日晷
2. 或点击[+]按钮，pill飞入日晷（动画）
3. 搜索实时过滤
4. 点击pill → 展开详情（成分、机制、禁忌）
```

---

### 3. 右栏：冲突检测面板（Conflict Monitor）

**设计要求：**

```tsx
// 实时监控
┌─────────────────┐
│ ⚠️ 冲突检测      │
├─────────────────┤
│ 🔴 CRITICAL (0)  │
│ 🟡 HIGH (2)      │
│ 🟢 MEDIUM (1)    │
├─────────────────┤
│ ⚠️ Calcium × Iron│
│ 📍 08:00 & 08:00│
│ ⏰ 需间隔2小时   │
│ [自动调整]       │ ← 点击自动修复
├─────────────────┤
│ ✨ 协同效应 (3)  │
│ ✓ Vit D + Ca    │
│   增强吸收 +25%  │
└─────────────────┘

// 样式：
- 危险级别用颜色块（红/黄/绿）
- 每个冲突：卡片形式，左侧竖条表示严重度
- [自动调整]按钮：点击后pill自动移动到合适时间

// 化学键可视化：
下方小型力场图（简化版ConflictGraph）
- 只显示当前已添加的supplements
- 红线=冲突，绿线=协同
- 点击线 → 显示机制解释
```

---

### 4. 底部：社区培养皿（Community Wall）

**设计要求：**

```tsx
// 横向滚动展示其他用户的stack
┌──────┬──────┬──────┬──────┬──────┐
│ 用户A │ 用户B │ 用户C │ 用户D │ ...  │
│ ⭐⭐⭐│ ⭐⭐  │ ⭐⭐⭐│ ⭐    │      │
│ 5补剂 │ 8补剂 │ 3补剂 │ 12补剂│      │
│ 0冲突 │ 1冲突 │ 0冲突 │ 3冲突 │      │
│[参考] │[参考] │[参考] │[参考] │      │
└──────┴──────┴──────┴──────┴──────┘

// 样式：
- 每个用户卡片：紧凑的日晷缩略图
- 星级表示"优化程度"（基于冲突数、科学性）
- Hover: 放大预览
- 点击[参考]: 一键复制TA的stack到你的日晷

// 交互：
- 自动横向滚动（缓慢）
- 鼠标悬停停止滚动
- 点击卡片 → 弹出详情Modal
```

---

## 🎯 首页改造：从输入框到实验台

**彻底抛弃"分析视频"流程，改为：**

### 新流程：

```
1. 用户进入 → 直接看到日晷+补剂库
   ↓
2. 从补剂库拖拽pill到日晷上
   ↓
3. 实时检测冲突，右侧面板提示
   ↓
4. 一键[自动优化]，pill自动重排
   ↓
5. 满意后[保存方案][分享]
```

**视频分析功能移到：**
- 顶部导航：[从视频导入] 按钮
- 点击后弹出Modal，粘贴内容
- 分析后supplements自动飞入左栏补剂库
- 用户再从补剂库拖拽到日晷

---

## 🖼️ 视觉元素库

### 图标系统（不用emoji！用SVG图标）

```
补剂类型图标：
- Vitamin: 💧 (液滴)
- Mineral: ⬡ (六边形晶体)
- Amino: 🧬 (螺旋)
- Herbal: 🌿 (叶子)

交互图标：
- 冲突: ⚡ (闪电)
- 协同: ✨ (星星)
- 警告: ⚠️ (三角)
- 安全: ✓ (勾)
```

### 装饰元素

```
- 背景：淡灰色网格纸（1px网格）
- 分割线：实线，不用虚线
- 阴影：硬阴影，不用柔和阴影
  box-shadow: 4px 4px 0px rgba(0,0,0,0.1);
- 圆角：统一 8px（不要太圆）
```

---

## 🔥 关键交互设计

### 拖拽系统

```tsx
// 使用 react-beautiful-dnd 或 dnd-kit

1. 从补剂库拖拽pill
   - 鼠标按下：pill轻微放大
   - 开始拖拽：pill半透明 + 跟随鼠标
   - 日晷上的时间点：Hover时高亮（白→浅蓝）

2. 放置到日晷
   - 松手：pill弹跳落入位置
   - 同时检测冲突
   - 如有冲突：红色脉冲警告 + 右侧面板更新

3. 调整时间
   - 拖拽pill在日晷上移动
   - 实时显示新时间
   - 松手：重新检测冲突
```

### 自动优化算法

```tsx
点击[自动优化]按钮：
1. 所有pill暂时半透明
2. 算法计算最优排布
3. Pills依次动画移动到新位置（stagger）
4. 冲突数字从N → 0 的计数动画
5. 成功后：绿色勾勾 + "优化完成！"
```

---

## 📱 响应式策略

### 桌面 (>1024px)
- 3栏布局：补剂库 | 日晷 | 冲突面板

### 平板 (768-1024px)
- 2栏布局：日晷占70% | 右栏占30%
- 补剂库改为顶部横向滚动

### 手机 (<768px)
- 单栏布局
- Tab切换：[日晷] [补剂库] [冲突]
- 日晷改为可滑动列表视图

---

## 🎬 动画语言（克制！）

**原则：只在有意义的地方用动画**

```css
/* 允许的动画 */
✓ pill拖拽弹跳
✓ 冲突警告脉冲
✓ 数字计数变化
✓ pill飞入日晷
✓ 自动优化的移动

/* 禁止的动画 */
✗ 页面切换淡入淡出
✗ 无意义的漂浮
✗ 过度的弹簧效果
✗ 炫技的3D翻转
```

---

## 🏗️ 实现优先级

### P0 (核心体验)
1. ✅ 日晷组件 - 24h圆环，可放置pill
2. ✅ 补剂库 - 可拖拽的pill列表
3. ✅ 拖拽系统 - pill → 日晷
4. ✅ 冲突检测 - 实时显示右栏

### P1 (完整体验)
5. ✅ 自动优化按钮
6. ✅ 力场图（右栏小型版）
7. ✅ 保存/分享功能
8. ✅ 从视频导入Modal

### P2 (社区化)
9. ✅ 社区墙
10. ✅ 点赞/评论
11. ✅ 用户Profile

---

## 🎨 配色方案最终确定

```css
/* 主色调：实验室白 */
body {
  background: #FAFAFA;
  color: #1A1A1A;
}

/* 强调色 */
.danger { color: #FF3B30; }
.warning { color: #FFD700; }
.safe { color: #34C759; }
.primary { color: #0066FF; }

/* 卡片 */
.card {
  background: #FFFFFF;
  border: 1px solid #E5E5E5;
  box-shadow: 4px 4px 0px rgba(0,0,0,0.05);
}

/* Pill */
.pill {
  background: white;
  border-left: 4px solid var(--category-color);
  padding: 12px 16px;
  font-family: var(--font-label);
}

/* 日晷 */
.sundial {
  background: white;
  border: 2px solid #1A1A1A;
  border-radius: 50%;
}
```

---

## ✅ 验收标准

改造完成后，必须满足：

- [ ] 打开页面立即看到日晷（不是输入框）
- [ ] 可以拖拽pill到日晷上
- [ ] 拖拽有弹跳动画
- [ ] 右侧实时显示冲突
- [ ] 有[自动优化]按钮
- [ ] 点击优化后pill自动重排
- [ ] 底部有社区墙（至少mock数据）
- [ ] 无渐变色！
- [ ] 字体用等宽字体显示数据
- [ ] 硬阴影风格

---

**这才是真正的设计！不是AI那套烂大街的渐变！** 🔬

现在给Cursor这个方案，让它按照这个重新做！
